!function(e){function t(s){if(a[s])return a[s].exports;var i=a[s]={exports:{},id:s,loaded:!1};return e[s].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var a={};return t.m=e,t.c=a,t.p="./js/",t(0)}({0:function(e,t,a){a(31),a(29),a(33),a(30),a(32),e.exports=a(28)},28:function(e,t){!function(e,t){var a=t.createClass({displayName:"McNav",render:function(){var e=this.props.click;return t.createElement("section",{className:"mc_foot"},t.createElement("nav",{className:"foot_list"},t.createElement("ul",null,this.props.data.map(function(a,i){return t.createElement(s,{li:a,index:i,click:e})}))))}}),s=t.createClass({displayName:"McNavli",handleMouseOver:function(){"skin"==this.props.li["data-sort"]||"connect"==this.props.li["data-sort"]},handleMouseOut:function(){"skin"==this.props.li["data-sort"]||"connect"==this.props.li["data-sort"]},render:function(){return t.createElement("li",{className:this.props.li.cur+" "+this.props.li["data-sort"],onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut,onClick:this.props.click.bind(this,this.props.index,this.props.li["data-sort"])},t.createElement("a",{href:"#"},t.createElement("span",null,this.props.li.title)))}}),i=t.createClass({displayName:"McMain",getInitialState:function(){return{show:"recommend"}},componentDidMount:function(){this.props.setStart(!1,this.handleClick)},handleClick:function(e,t){return mcAction.liCur($(".foot_list li"),e),this.setState({show:t}),!1},render:function(){return t.createElement("div",{className:"mc_main "+this.state.show},t.createElement(SevrBox,{getAddress:this.props.getAddress,linkSele:this.props.linkSele,initSele:this.props.initSele,setStart:this.props.setStart}),t.createElement(RecomBox,null),t.createElement(ResourceBox,null),t.createElement(SkinBox,null),t.createElement(VideoBox,null),t.createElement(a,{data:this.props.data.nav,click:this.handleClick}))}}),n=t.createClass({displayName:"McSideSelet",bOffline:!1,getInitialState:function(){return{sele:e.localStorage.serverSele,show:"hidden",url:this.props.url,id:this.props.data.id}},handleClick:function(t,a){mcAction.showOnly($(".server_list"),this.props.index),"0"===this.props.index?this.props.linkSele(t):"1"===this.props.index&&(e.localStorage.linksSele=t.name,e.localStorage.urlSele=t.url),this.setState({sele:t.name,url:t.url})},seleSevr:function(e){return this.bOffline||mcAction.showOnly($(".server_list"),this.props.index),!1},componentWillUpdate:function(e,t){.1===e.offline.opacity?this.bOffline=!0:this.bOffline=!1},componentWillReceiveProps:function(e){this.setState({sele:e.seleServer,url:e.url,id:e.data.id})},render:function(){var e=this;return t.createElement("dl",{className:"item",style:this.props.offline},t.createElement("dt",{className:"tit sver_sele","data-url":this.state.url,"data-id":this.state.id},t.createElement("span",{onClick:this.seleSevr},this.state.sele)),t.createElement("dd",{className:"server_list hidden"},t.createElement("ul",null,this.props.data.map(function(a,s){return t.createElement(r,{li:a,click:e.handleClick,index:s})}))))}}),r=t.createClass({displayName:"McSideSeletli",render:function(){return t.createElement("li",{onClick:this.props.click.bind(this,this.props.li,this.props.index)},this.props.li.name)}}),l=t.createClass({displayName:"McSide",getInitialState:function(){return{data:[],user:{},nowObj:{},offline:{opacity:1}}},componentWillMount:function(){this.setState({user:userProfile.userProfileJson()})},componentWillReceiveProps:function(t){var a=t.data[_.findIndex(t.data,{name:e.localStorage.serverSele,id:e.localStorage.serverSeleId})];this.setState({nowObj:a})},handleClick:function(e){mcAction.liCur($(".side_foot .type li"),e),0===e?this.setState({offline:{opacity:.1}}):this.setState({offline:{opacity:1}}),mcAction.hiddenAll($(".server_list"))},logOut:function(){loginHost.LogOut()},handleStart:function(e){var t=$(".sver_sele").eq(1).attr("data-url");this.props.setStart(e,t),this.props.showsrc("1","sevr")},render:function(){var e=this;return t.createElement("div",{className:"mc_side"},t.createElement("div",{className:"user_info"},t.createElement("div",{className:"pic"},t.createElement("img",{src:this.state.user.big,width:"66",height:"66",alt:""})),t.createElement("div",{className:"info"},t.createElement("p",null,t.createElement("a",{className:"user_name",href:"#"},this.state.user.nickname)))),t.createElement("div",{className:"side_foot"},t.createElement("div",{className:"type clearfix"},t.createElement("ul",null,t.createElement("li",{className:"hidden",onClick:this.handleClick.bind(this,0)},"单机"),t.createElement("li",{className:"cur",onClick:this.handleClick.bind(this,1)},"多人"))),t.createElement("div",{className:"server_con"},t.createElement(n,{data:this.props.data,offline:e.state.offline,linkSele:this.props.linkSele,index:"0",seleServer:this.props.seleServer[0]}),t.createElement(n,{data:this.props.links,offline:e.state.offline,index:"1",seleServer:this.props.seleServer[1],url:this.props.seleServer[2]})),t.createElement("a",{className:"btn_start",onClick:this.handleStart.bind(this,this.state.nowObj),href:"#"},"启动")))}});e.McBody=t.createClass({displayName:"window.McBody",getInitialState:function(){return{data:staticData,address:[],links:[],setStart:function(){},showsrc:function(){},seleServer:[e.localStorage.serverSele,e.localStorage.linksSele,e.localStorage.urlSele,e.localStorage.serverSeleId],stt:""}},initSele:function(t){var a=0;a=_.findIndex(t.server,{name:e.localStorage.serverSele}),this.linkSele(t.server[a])},hiddenAll:function(e){mcAction.hiddenAll($(".server_list")),mcAction.hiddenAll($(".mylink_list"))},onGetaddress:function(e){var t=e;this.setState({address:t})},setStart:function(e,t){e?this.setState({setStart:e}):"",t?this.setState({showsrc:t}):""},linkSele:function(t){var a=[];t&&(_.forIn(t.address,function(e,t){a.push({name:t,url:e})}),e.localStorage.serverSele=t.name,e.localStorage.serverSeleId=t.id,e.localStorage.linksSele=a[0].name,e.localStorage.urlSele=a[0].url,$(".sver_sele").eq(1).attr("data-url",a[0].url),this.setState({links:a,seleServer:[t.name,a[0].name,a[0].url,t.id]}))},render:function(){return t.createElement("div",{className:"container",onClick:this.hiddenAll},t.createElement(i,{data:this.state.data,getAddress:this.onGetaddress,linkSele:this.linkSele,initSele:this.initSele,setStart:this.setStart}),t.createElement(l,{data:this.state.address,links:this.state.links,linkSele:this.linkSele,seleServer:this.state.seleServer,setStart:this.state.setStart,showsrc:this.state.showsrc}))}}),t.render(t.createElement(McBody,null),document.getElementById("warpper"))}(window,window.React)},29:function(e,t){!function(e){var t=e.createClass({displayName:"Tab",render:function(){var t=this.props.click;return e.createElement("ul",null,this.props.data.map(function(s,i){return e.createElement(a,{li:s,index:i,click:t})}))}}),a=e.createClass({displayName:"Li",render:function(){return e.createElement("li",{className:this.props.li.cur,onClick:this.props.click.bind(this,this.props.index,this.props.li.sort)},this.props.li.title)}}),s=e.createClass({displayName:"Tabbody",render:function(){var t=this.props.ret.zixun.list.map(function(t){return e.createElement(n,{data:t})}),a=this.props.ret.videos.list.map(function(t){return e.createElement(i,{data:t})}),s=this.props.ret.bbs.list.map(function(t,a){return a>2?!1:e.createElement(n,{data:t})}),r=this.props.ret.down.list.map(function(t){return e.createElement(n,{data:t})});return e.createElement("div",{className:"list"},e.createElement("ul",{className:"mc_zx"},t),e.createElement("ul",{className:"mc_sp"},a),e.createElement("ul",{className:"mc_jy"},s,e.createElement("a",{className:"mc_jy_money_btn",href:"http://mcbbs.aipai.com/forum.php?mod=forumdisplay&fid=62"},"我要赚钱"),e.createElement("a",{className:"mc_jy_people_btn",href:"http://mcbbs.aipai.com/forum.php?mod=forumdisplay&fid=63"},"我要聘人")),e.createElement("ul",{className:"mc_xz"},r))}}),i=e.createClass({displayName:"TabbodyVideo",render:function(){return e.createElement("li",null,e.createElement("a",{className:"pics",href:this.props.data.url},e.createElement("img",{src:this.props.data.pic,alt:""}),e.createElement("span",{className:"time"},this.props.data.duration)),e.createElement("h3",null,e.createElement("a",{href:this.props.data.url},this.props.data.title)))}}),n=e.createClass({displayName:"TabbodyText",render:function(){return e.createElement("h3",{className:"text"},e.createElement("span",null,"[",this.props.data.tag,"] "),e.createElement("a",{href:this.props.data.url},this.props.data.title))}}),r=e.createClass({displayName:"Info",getInitialState:function(){return{show:"zx",index:"0",moreUrl:""}},imgLoadError:function(){this.getDOMNode().querySelector("img").src="css/img/s.png"},componentWillReceiveProps:function(e){""==this.state.moreUrl&&this.setState({moreUrl:e.ret.zixun.more})},handleClick:function(e,t){switch(mcAction.liCur($(".mod_info .nav li"),e),this.setState({show:t,index:e}),e){case 1:this.setState({moreUrl:this.props.ret.videos.more});break;case 2:this.setState({moreUrl:this.props.ret.bbs.more});break;case 3:this.setState({moreUrl:this.props.ret.down.more});break;case 0:this.setState({moreUrl:this.props.ret.zixun.more})}},render:function(){return e.createElement("div",{className:"mod_info"},e.createElement("div",{className:"con_l"},e.createElement("div",{className:"hd_nav"},e.createElement("div",{className:"nav"},e.createElement(t,{data:this.props.data.infoTab,click:this.handleClick})),e.createElement("a",{className:"more",href:this.state.moreUrl},"更多",this.props.data.infoTab[this.state.index].title)),e.createElement("div",{className:"bd_tab"},e.createElement("div",{className:"tab_con "+this.state.show},e.createElement(s,{data:this.props.data,ret:this.props.ret})))),e.createElement("div",{className:"con_r bbs"},e.createElement("a",{href:this.props.ret.ad.list[0].url},e.createElement("img",{src:this.props.ret.ad.list[0].pic}))))}}),l=e.createClass({displayName:"Focus",componentDidMount:function(){setTimeout(function(){$("#mod_focus").dsTab({itemEl:".con li",btnElName:"tabTip",btnItem:"li",prev:".prev",next:".next",currentClass:"cur",maxSize:5,changeType:"fade",change:!0,changeTime:5e3,autoCreateTab:!0})},1e3)},render:function(){return e.createElement("div",{id:"mod_focus",className:"mod_focus1"},e.createElement("a",{href:"javascript:void(0);",className:"prev"}),e.createElement("a",{href:"javascript:void(0);",className:"next"}),e.createElement("ul",{className:"con"},this.props.data.list.map(function(t,a){return e.createElement(c,{li:t,index:a})})))}}),c=e.createClass({displayName:"Focusli",render:function(){var t={backgroundImage:"url("+this.props.li.pic+")"};return e.createElement("li",{className:this.props.li.cur},e.createElement("a",{href:this.props.li.url,title:""},e.createElement("img",{src:"css/img/default_focus.png",width:"670",height:"230"}),e.createElement("div",{className:"pic_con",style:t})))}});window.RecomBox=e.createClass({displayName:"window.RecomBox",getInitialState:function(){return{data:{sevrNav:[[],[],[]]},ret:{focus:{list:[]},zixun:{list:[],more:""},videos:{},down:{list:[]},bbs:{list:[]},ad:{list:[{url:"",pic:""}]},videos:{list:[]}}}},componentWillMount:function(){this.setState({data:staticData}),$.ajax({url:"https://dl.aipai.com/zuihuiwan/apps/mc.php",dataType:"jsonp",jsonpCallback:"mc",cache:!0,success:function(e){this.setState({ret:e.data})}.bind(this),error:function(e,t,a){console.error(this.props.url,t,a.toString())}.bind(this)})},handleClick:function(e,t){mcAction.liCur($(".sevr_nav li"),e),this.setState({show:t})},render:function(){return e.createElement("section",{className:"mc_recommend mc_focus"},e.createElement(l,{data:this.state.ret.focus}),e.createElement(r,{data:this.state.data,ret:this.state.ret}))}})}(window.React)},30:function(e,t){!function(e){var t=e.createClass({displayName:"SrcNav",render:function(){var t=this.props.click;return e.createElement("div",{className:"rest_nav hd_res"},e.createElement("ul",null,this.props.data.map(function(s,i){return e.createElement(a,{li:s,index:i,click:t})})))}}),a=e.createClass({displayName:"SrcNavli",render:function(){return e.createElement("li",{className:this.props.li.cur,onClick:this.props.click.bind(this,this.props.index,this.props.li["data-sort"])},this.props.li.title)}}),s=e.createClass({displayName:"TipPop",render:function(){return e.createElement("div",{className:"tipShadow "+this.props.show},e.createElement("div",{className:"tipPop"},e.createElement("p",{className:"title"},"提示"),e.createElement("p",{className:"content"},"你确定要删除此资源吗?"),e.createElement("span",{className:"tip_btn_del",onClick:this.props.btn1},"删除"),e.createElement("span",{className:"tip_btn_cal",onClick:this.props.btn2},"取消")))}}),i=e.createClass({displayName:"SrcDetal",body:"",getInitialState:function(){return{status:"2",progress:"0%",show:"hidden",cln:"detail_pause"}},componentWillMount:function(){this.body=e.createElement("div",{className:"done_tit"},this.props.obj.name)},componentWillReceiveProps:function(t){var a={width:t.obj.progress};switch(this.setState({status:t.obj.srcState}),this.setState({progress:t.obj.progress}),t.obj.srcState){case"5":this.body=e.createElement("div",{className:"done_tit"},t.obj.name),this.setState({cln:"detail_dow"});break;case"3":this.body=e.createElement("div",{className:"done_tit"},t.obj.name),this.setState({cln:"detail_del",progress:t.obj.name});break;case"2":this.body=e.createElement("div",{className:"progress"},e.createElement("span",{className:"rate",style:a}),e.createElement("span",{className:"done"},t.obj.progress)),this.setState({cln:"detail_pause"})}},handleClick:function(e){switch(e){case"detail_dow":mcAction.downloadSrc(this.props.obj.id,this.props.obj.type,this.props.obj,!1);break;case"detail_pause":mcAction.stopDownloadSrc(this.props.obj.id,this.props.obj.type),this.onTipDel();break;case"detail_del":mcAction.delSrc(this.props.obj.id,this.props.obj.type)}},downLoad:function(){mcAction.downloadSrc(this.props.obj.id,this.props.obj.type,this.props.obj,this.props.ismy),this.setState({status:"2"})},"delete":function(){mcAction.delSrc(this.props.obj.id,this.props.obj.type),this.setState({show:"hidden"})},onTipDel:function(){this.setState({show:"show"})},onHiddenTip:function(){this.setState({show:"hidden"}),this.downLoad()},render:function(){var t="";switch(this.props.obj.type){case"1":t="MOD";break;case"2":t="存档";break;case"3":t="材质"}return e.createElement("div",{className:"src_detal "+this.props.showdetal},e.createElement(s,{show:this.state.show,btn1:this["delete"],btn2:this.onHiddenTip}),e.createElement("h1",null,e.createElement("p",{onClick:this.props.hiddenDetal},e.createElement("i",{className:"arrow"}),e.createElement("span",null,"返回"))),e.createElement("div",{className:"src_detal_head"},e.createElement("img",{src:"css/img/src_detail_head.png"}),e.createElement("span",{className:"detail_btn "+this.state.cln,onClick:this.handleClick.bind(this,this.state.cln)}),this.body),e.createElement("div",{className:"detal_info"},e.createElement("p",null,e.createElement("span",{className:"tit"},"类型 : "),e.createElement("span",null,t)),e.createElement("p",null,e.createElement("span",{className:"tit"},"适用版本 : "),e.createElement("span",null,this.props.obj.mcver)),e.createElement("p",null,e.createElement("span",{className:"tit"},"描述 : "),e.createElement("span",null,this.props.obj.description))))}}),n=e.createClass({displayName:"Srclist",dealMcver:function(e){var t=[],a=!0,s=!0;return e.mcver.split("-").forEach(function(e,a){t[a]=e.split(".")}),0==this.props.limit[1]?!0:1==t.length?(this.props.limit[1].join("")!=t[0].join("")&&(a=!1,s=!1),a&&s):2==t.length?(this.props.limit[1].forEach(function(e,i){a&&~~e<~~t[0][i]&&void 0!=t[0][i]&&0!=t[0][i]&&(a=!1),s&&~~e>~~t[1][i]&&void 0!=t[1][i]&&0!=t[1][i]&&(s=!1)}),this.props.limit[1].join("")==t[0].join("")&&(a=!0,s=!0),this.props.limit[1].join("")==t[1].join("")&&(a=!0,s=!0),a&&s):void 0},render:function(){var t=this.props.toDetal,a=this;return all=this.props.ret.map(function(s){return a.dealMcver(s)?e.createElement(r,{data:s,ismy:!1,toDetal:t}):void 0}),my=this.props.myRet.map(function(s){return a.dealMcver(s)?e.createElement(r,{data:s,ismy:!0,toDetal:t}):void 0}),e.createElement("div",{className:"clearfix down_con "+this.props.show+" "+this.props.limit[0]+" vr"+this.props.limit[1]},e.createElement("div",{className:"all_src"},all),e.createElement("div",{className:"my_src"},my))}}),r=e.createClass({displayName:"Src",body:"",st:"",getInitialState:function(){return{status:"2",progress:this.props.data.progress,cln:"",show:"hidden"}},componentWillMount:function(){switch(this.setState({status:this.props.data.srcState,progress:this.props.data.progress}),this.props.data.srcState){case"5":this.body=e.createElement("span",{onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut},e.createElement("dt",{className:"tit"},this.props.data.name),e.createElement("dd",{className:"con"},e.createElement("p",{className:"tip"},this.props.data.mcver)),e.createElement("a",{className:"btn_down",href:"#"},e.createElement("span",{className:"detail",onClick:this.props.toDetal.bind(this,this.props.data)}),e.createElement("span",{className:"down",onClick:this.downLoad.bind(this,this.props.data.id,this.props.data.type,this.props.data,this.props.ismy)})));break;case"3":this.body=e.createElement("span",{onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut},e.createElement("div",{className:"tip_down"},"已下载"),e.createElement("dt",{className:"tit"},this.props.data.name),e.createElement("dd",{className:"con"},e.createElement("p",{className:"tip"},this.props.data.mcver)),e.createElement("a",{className:"btn_del",href:"#"},e.createElement("span",{className:"detail",onClick:this.props.toDetal.bind(this,this.props.data)}),e.createElement("span",{className:"del",onClick:this.stopDownload.bind(this,this.props.data.id,this.props.data.type,this.props.data,this.props.ismy)})))}},componentWillReceiveProps:function(t){var a={width:t.data.progress};switch(this.setState({status:t.data.srcState,progress:t.data.progress}),t.data.srcState){case"5":this.body=e.createElement("span",{onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut},e.createElement("dt",{className:"tit"},t.data.name),e.createElement("dd",{className:"con"},e.createElement("p",{className:"tip"},t.data.mcver)),e.createElement("a",{className:"btn_down",href:"#"},e.createElement("span",{className:"detail",onClick:t.toDetal.bind(this,t.data)}),e.createElement("span",{className:"down",onClick:this.downLoad.bind(this,t.data.id,t.data.type,t.data,t.ismy)})));break;case"4":this.body=e.createElement("span",{onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut},e.createElement("dt",{className:"tit"},t.data.name),e.createElement("dd",{className:"con"},e.createElement("p",{className:"tip"},t.data.mcver)),e.createElement("a",{className:"btn_down",href:"#"},e.createElement("span",{className:"detail",onClick:t.toDetal.bind(this,t.data)}),e.createElement("span",{className:"down",onClick:this.downLoad.bind(this,t.data.id,t.data.type,t.data,t.ismy)})));break;case"3":this.body=e.createElement("span",{onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut},e.createElement("div",{className:"tip_down"},"已下载"),e.createElement("dt",{className:"tit"},t.data.name),e.createElement("dd",{className:"con"},e.createElement("p",{className:"tip"},t.data.mcver)),e.createElement("a",{className:"btn_del",href:"#"},e.createElement("span",{className:"detail",onClick:this.props.toDetal.bind(this,this.props.data)}),e.createElement("span",{className:"del",onClick:this.stopDownload.bind(this,t.data.id,t.data.type,t.data,t.ismy)})));break;case"2":this.body=e.createElement("div",{className:"progress",onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut},e.createElement("span",{className:"rate",style:a}),e.createElement("span",{className:"done"},t.data.progress),e.createElement("span",{className:"pause",onClick:this.stopDownload.bind(this,t.data.id,t.data.type,t.data,t.ismy)},"删除"))}},downLoad:function(){mcAction.downloadSrc(this.props.data.id,this.props.data.type,this.props.data,this.props.ismy),this.setState({status:"2"})},stopDownload:function(){mcAction.stopDownloadSrc(this.props.data.id,this.props.data.type),this.setState({cln:""}),this.onTipDel()},"delete":function(){mcAction.delSrc(this.props.data.id,this.props.data.type),this.setState({show:"hidden"})},handleMouseOver:function(e){clearTimeout(this.st),"3"==this.state.status&&this.setState({cln:"state_close"}),"2"==this.state.status&&this.setState({cln:"state_pause"}),("5"==this.state.status||"4"==this.state.status)&&this.setState({cln:"state_down"})},handleMouseOut:function(){var e=this;this.st=setTimeout(function(){e.setState({cln:""})},100)},onTipDel:function(){this.setState({show:"show"})},onHiddenTip:function(){this.setState({show:"hidden"}),this.downLoad()},render:function(){return e.createElement("dl",{className:"item limit"+this.props.data.type+" "+this.state.cln},e.createElement(s,{show:this.state.show,btn1:this["delete"],btn2:this.onHiddenTip}),this.body)}}),l=e.createClass({displayName:"SrcMod",getInitialState:function(){return{limitty:"mod_type",limitvr:"0",isLoading:!1,modPage:2,czPage:2,mapPage:2}},componentDidMount:function(){var e=this;$(".down_con").on("scroll",function(){var t,a=$(this).scrollTop(),s=$(".all_src").height(),i=$(this).height(),n=!1;if(a+i>=s){if(e.state.isLoading)return;e.setState({isLoading:!0});var r,l,c;"mod_type"===e.state.limitty?(r=1,c="modPage",l=e.state.modPage):"cz_type"===e.state.limitty?(r=3,c="czPage",l=e.state.czPage):"map_type"===e.state.limitty&&(r=2,c="mapPage",l=e.state.mapPage),$.ajax({url:"https://dl.aipai.com/zuihuiwan/apps/mc_action-resource_sort-hot_type-"+r+"_page-"+l+".html",dataType:"jsonp",jsonpCallback:"mc_src",cache:!0,success:function(a){if(console.log(a),-1!=a.code){switch(t=a.resource.mod,t=t.concat(a.resource.map,a.resource.resourcepack),t.forEach(function(e,t){e.progress="即将开始下载",e.srcState="5"}),n=t.length<1?!0:!1,c){case"modPage":e.setState({modPage:l+1,isLoading:n});break;case"czPage":e.setState({czPage:l+1,isLoading:n});break;case"mapPage":e.setState({mapPage:l+1,isLoading:n})}e.props.upAllsrc(t)}}.bind(this),error:function(e,t,a){}.bind(this)})}})},handleClickTy:function(e,t){mcAction.liCur($(".ty_list .con"),e),this.setState({limitty:t})},handleClickVr:function(e,t){mcAction.liCur($(".ver_list .con"),e),this.setState({limitvr:t.split(".")})},render:function(){var t=this.handleClickVr,a=this.handleClickTy,s=this.props.toDetal;return e.createElement("div",{className:"bd_res"},e.createElement("div",{className:"res_tabcon"},e.createElement("div",{className:"rest_select select_con"},e.createElement("div",{className:"clearfix list ty_list"},e.createElement("ul",null,e.createElement("li",{className:"ti"},"类型："),this.props.data.srclimittp.map(function(t,s){return e.createElement(c,{li:t,index:s,click:a})}))),e.createElement("div",{className:"clearfix list ver_list"},e.createElement("ul",null,e.createElement("li",{className:"ti"},"版本："),this.props.data.srclimitvr.map(function(a,s){return e.createElement(c,{li:a,index:s,click:t})})))),e.createElement(n,{ret:this.props.ret,myRet:this.props.myRet,show:this.props.show,limit:[this.state.limitty,this.state.limitvr],toDetal:s})))}}),c=e.createClass({displayName:"SrcLimitli",render:function(){return e.createElement("li",{className:"con "+this.props.li.cls,onClick:this.props.click.bind(this,this.props.index,this.props.li.sort)},this.props.li.title)}});window.ResourceBox=e.createClass({displayName:"window.ResourceBox",srcMyObj:"",srcAllObj:"",getInitialState:function(){return{ret:[],myRet:[],data:staticData,showdetal:"hidden",show:"all",obj:{}}},addData:function(e,t){var a=resManager.allLocalResJson(),s=0;_.remove(a,function(e){return 101==e.type}),s=_.findIndex(a,{id:e.toString(),type:t.toString()}),a[s].progress="即将下载",a[s].srcState="2",this.srcMyObj.push(a[s]),this.setState({myRet:this.srcMyObj})},delData:function(e,t){_.remove(this.srcMyObj,function(a){return a.id==e&&a.type==t}),this.setState({myRet:this.srcMyObj})},getData:function(){var e=this;resManager.installStatusChanged.connect(function(t,a,s,i){var n=_.findIndex(e.srcAllObj,{id:t.toString(),type:a.toString()}),r=_.findIndex(e.srcMyObj,{id:t.toString(),type:a.toString()});try{e.srcAllObj[n].srcState=i.toString()}catch(l){}try{e.srcMyObj[r].srcState=i.toString()}catch(l){}e.setState({ret:e.srcAllObj,myRet:e.srcMyObj})}),resManager.installProgressChanged.connect(function(t,a,s){var i=_.findIndex(e.srcAllObj,{id:t.toString(),type:a.toString()}),n=_.findIndex(e.srcMyObj,{id:t.toString(),type:a.toString()});try{e.srcAllObj[i].progress=s+"%"}catch(r){}try{e.srcMyObj[n].progress=s+"%"}catch(r){}e.setState({ret:e.srcAllObj,myRet:e.srcMyObj})})},initData:function(){this.getData(),this.srcMyObj=resManager.allLocalResJson(),_.remove(this.srcMyObj,function(e){return 101==e.type}),this.srcMyObj.forEach(function(e){void 0==e.progress&&(e.progress="即将开始下载"),void 0==e.srcState&&(e.srcState="3")}),this.setState({myRet:this.srcMyObj})},componentWillMount:function(){$.ajax({url:"https://dl.aipai.com/zuihuiwan/apps/mc_action-resource_sort-hot_page-1.html",dataType:"jsonp",jsonpCallback:"mc_src",cache:!0,success:function(e){-1!=e.code&&(this.srcAllObj=e.resource.mod,this.srcAllObj=this.srcAllObj.concat(e.resource.map,e.resource.resourcepack),this.srcAllObj.forEach(function(e,t){e.progress="即将开始下载",e.srcState="5"}),this.setState({ret:this.srcAllObj}))}.bind(this),error:function(e,t,a){}.bind(this)}),mcAction.litenSrc(this.addData,this.delData,this.initData)},handleClick:function(e,t){mcAction.liCur($(".mc_resource .rest_nav li"),e),this.setState({show:t})},upAllsrc:function(e){var t=this.state.ret.concat(e);this.setState({ret:t}),this.srcAllObj=t},toDetal:function(e){this.setState({showdetal:"show",obj:e})},onHiddenDetal:function(){this.setState({showdetal:"hidden"})},render:function(){return e.createElement("section",{className:"mc_src mc_resource"},e.createElement(i,{showdetal:this.state.showdetal,hiddenDetal:this.onHiddenDetal,obj:this.state.obj}),e.createElement(t,{data:this.state.data.srcNav,click:this.handleClick}),e.createElement(l,{ret:this.state.ret,myRet:this.state.myRet,data:this.state.data,show:this.state.show,toDetal:this.toDetal,upAllsrc:this.upAllsrc}))}})}(window.React)},31:function(e,t){!function(e){var t=e.createClass({displayName:"SevrNav",render:function(){var t=this.props.click,s="hidden",i=userProfile.joinServerBtnInfo()||{status:0,link:"http://aipai.com",text:"服主加盟"};return 0==i.status&&(s="show"),e.createElement("nav",{className:"sevr_nav"},e.createElement("ul",null,this.props.data.map(function(s,i){return e.createElement(a,{li:s,index:i,click:t})})),e.createElement("a",{href:i.link,className:"fzjm_btn "+s},i.name))}}),a=e.createClass({displayName:"SevrNavli",render:function(){return e.createElement("li",{className:this.props.li.cur,onClick:this.props.click.bind(this,this.props.index,this.props.li["data-sort"])},e.createElement("a",{href:"#"},this.props.li.title))}}),s=e.createClass({displayName:"SevrShadow",render:function(){return e.createElement("div",{className:"start_shadow "+this.props.show},e.createElement("div",{className:"load8"},e.createElement("p",{className:"txt"},"启动中"),e.createElement("div",{className:"loader"},"Loading...")),e.createElement("p",{className:"progress_txt"},this.props.txt))}}),i=e.createClass({displayName:"TipPop",render:function(){return e.createElement("div",{className:"tipShadow "+this.props.show},e.createElement("div",{className:"tipPop"},e.createElement("p",{className:"title"},"提示"),e.createElement("p",{className:"content"},"你确定要删除此服务器吗?"),e.createElement("span",{className:"tip_btn_del",onClick:this.props.btn1},"删除"),e.createElement("span",{className:"tip_btn_cal",onClick:this.props.btn2},"取消")))}}),n=e.createClass({displayName:"SevrDetal",getInitialState:function(){var e="css/img/s.png";return""!==this.props.obj.videoPic&&(e=this.props.obj.videoPic),{vPic:e,online:"获取异常"}},componentWillReceiveProps:function(e){var t;e.obj.id&&e.obj.address&&(mcAction.checkServerStatus(e.obj.id,e.obj.address),t=serverChecker.serverState(e.obj.id)),t&&0===t.code?this.setState({online:t.online}):this.setState({online:"获取异常"})},render:function(){return e.createElement("div",{className:"sevr_detal "+this.props.showdetal},e.createElement("h1",null,e.createElement("p",{onClick:this.props.hiddenDetal},e.createElement("i",{className:"arrow"}),e.createElement("span",null,"返回"))),e.createElement("div",{className:"detal_info"},e.createElement("p",null,"游戏类型 : ",this.props.obj.gametype),e.createElement("p",null,"游戏版本 : ",this.props.obj.ver),e.createElement("p",null,"在线人数 : ",this.state.online),e.createElement("p",null,"网络 : ",this.props.obj.network)),e.createElement("div",{className:"sevr_detal_body game_pic"},e.createElement("img",{src:this.props.obj.pic,alt:""}),e.createElement("div",{className:"start_btn",onClick:this.props.handleStart.bind(this,this.props.obj,$(".sver_sele").eq(1).attr("data-url"))})),e.createElement("div",{className:"sevr_detal_video"},e.createElement("a",{href:this.props.obj.video||"javascript:void(0)"},e.createElement("img",{src:this.props.obj.videoPic||"css/img/s.png",alt:""}),e.createElement("span",null,"12:00")),e.createElement("div",{className:"video_info"},e.createElement("p",null,this.props.obj.name),e.createElement("p",null,this.props.obj.detail))))}}),r=e.createClass({displayName:"SevrGameBox",getInitialState:function(){return{allRet:[],modRet:[],myRet:[],debug:boxEnv.isDebugMode(),reflash:""}},componentWillMount:function(){function e(){$.ajax({url:"https://dl.aipai.com/zuihuiwan/apps/mc_action-allServer.html",dataType:"jsonp",jsonpCallback:"mc_allserver",cache:!0,success:function(e){-1!=e.code&&(s.setState({allRet:e.server}),s.props.initSele(e))}.bind(this),error:function(t,a,s){e()}.bind(this)})}function t(){$.ajax({url:"https://dl.aipai.com/zuihuiwan/apps/mc_action-allServer_type-64.html",dataType:"jsonp",jsonpCallback:"mc_modeserver",cache:!0,success:function(e){-1!=e.code&&(s.setState({modRet:e.server}),s.props.initSele(e))}.bind(this),error:function(e,a,s){t()}.bind(this)})}function a(){$.ajax({url:"https://dl.aipai.com/zuihuiwan/apps/mc.php?action=myServers&bid="+userProfile.userProfileJson().bid,dataType:"jsonp",jsonpCallback:"mc_myserver",cache:!0,success:function(e){-1!=e.code&&(s.setState({myRet:e.data}),s.props.getAddress(e.data))}.bind(this),error:function(e,t,s){a()}.bind(this)})}var s=this;e(),t(),a()},ajaxMyserver:function(){$.ajax({url:"https://dl.aipai.com/zuihuiwan/apps/mc.php?action=myServers&bid="+userProfile.userProfileJson().bid,dataType:"jsonp",jsonpCallback:"mc_myserver",cache:!0,success:function(e){-1!=e.code&&(that.setState({myRet:e.data}),that.props.getAddress(e.data))}.bind(this),error:function(e,t,a){ajaxMyserver()}.bind(this)})},delMyserver:function(e){var t=this;$.ajax({url:"https://dl.aipai.com/zuihuiwan/apps/mc.php?action=delServer&serverId="+e,dataType:"jsonp",jsonpCallback:"mc_delserver",cache:!0,success:function(e){-1!=e.code&&$.ajax({url:"https://dl.aipai.com/zuihuiwan/apps/mc.php?action=myServers&bid="+userProfile.userProfileJson().bid,dataType:"jsonp",jsonpCallback:"mc_myserver_ag",cache:!0,success:function(e){-1==e.code&&(e.data=[]),t.setState({myRet:e.data})}.bind(this),error:function(e,t,a){ajaxMyserver()}.bind(this)})}.bind(this),error:function(e,t,a){}.bind(this)})},hiddenAll:function(){mcAction.hiddenAll($(".setting_list"))},render:function(){var t=this,a=this.props.toDetal,s=this.props.handleStart,i=this.state.allRet.map(function(s){return 1==s.status||!t.state.debug&&2==s.status?void 0:e.createElement(l,{data:s,toDetal:a})}),n=this.state.modRet.map(function(s){return 1==s.status||!t.state.debug&&2==s.status?void 0:e.createElement(l,{data:s,toDetal:a})}),r=this.state.myRet.map(function(a,i){return 1==a.status||!t.state.debug&&2==a.status?void 0:e.createElement(p,{data:a,index:i,handleStart:s,delMyserver:t.delMyserver})});return e.createElement("div",{className:"sevr_body "+this.props.show
},e.createElement("div",{className:"hot_sevr"},i),e.createElement("div",{className:"mod_sevr"},n),e.createElement("div",{className:"my_sevr",onClick:this.hiddenAll},r))}}),l=e.createClass({displayName:"SevrGame",render:function(){return e.createElement("div",{className:"sevr_game ",onClick:this.props.toDetal.bind(this,this.props.data)},e.createElement("div",{className:"tag "+this.props.data.tag},e.createElement("img",{src:this.props.data.vpic,alt:"pic"})),e.createElement("p",{className:"name"},this.props.data.name))}}),c=e.createClass({displayName:"McSideSelet",getInitialState:function(){return{links:"",nowlink:""}},componentWillMount:function(){var e=[],t={};_.forIn(this.props.data.address,function(t,a){e.push({name:a,url:t})}),t={name:e[0].name,url:e[0].url},this.props.setMyUrl(e[0].url),this.setState({links:e,nowlink:t})},handleClick:function(e,t){mcAction.showOnly($(".mylink_list"),this.props.index),window.localStorage.serverSele=this.props.data.name,window.localStorage.serverSeleId=this.props.data.id,window.localStorage.linksSele=e.name,window.localStorage.urlSele=e.url,nowlink={name:e.name,url:e.url},this.props.setMyUrl(e.url),this.setState({nowlink:nowlink})},seleSevr:function(e){return mcAction.showOnly($(".mylink_list"),this.props.index),!1},render:function(){var t=this;return e.createElement("dl",{className:"item_mylink",style:this.props.offline},e.createElement("dt",{className:"tit_mylink",onClick:this.seleSevr},e.createElement("span",null,this.state.nowlink.name)),e.createElement("dd",{className:"mylink_list hidden"},e.createElement("ul",null,this.state.links.map(function(a,s){return e.createElement(o,{li:a,click:t.handleClick,index:s})}))))}}),o=e.createClass({displayName:"McSideSeletli",render:function(){return e.createElement("li",{onClick:this.props.click.bind(this,this.props.li,this.props.index)},this.props.li.name)}}),d=e.createClass({displayName:"McSideSetting",seleSetting:function(e){return mcAction.showOnly($(".setting_list"),this.props.index),!1},render:function(){return e.createElement("dl",{className:"item_setting"},e.createElement("dt",{onClick:this.seleSetting},e.createElement("i",{className:"set_btn"})),e.createElement("dd",{className:"setting_list hidden"},e.createElement("ul",null,e.createElement("li",{className:"set_del",onClick:this.props.onSet},"资源配置"),e.createElement("li",{className:"set_del",onClick:this.props.onDel},"删除服务器"))))}}),p=e.createClass({displayName:"MyGame",getInitialState:function(){return{status:{},nowlinkUrl:"",show:"hidden"}},componentDidMount:function(){mcAction.checkServerStatus(this.props.data.id,this.props.data.address)},componentWillReceiveProps:function(e){var t;t=serverChecker.serverState(e.data.id),this.setState({status:t})},setMyUrl:function(e){this.setState({nowlinkUrl:e})},onTipDel:function(){this.setState({show:"show"})},onHiddenTip:function(){this.setState({show:"hidden"})},delMyserver:function(){this.props.delMyserver(this.props.data.id),this.setState({show:"hidden"})},onSetting:function(){instManager.showResourceConfigWnd(this.props.data.id,this.props.data)},render:function(){return e.createElement("div",{className:"mysevr_game"},e.createElement(i,{show:this.state.show,btn1:this.delMyserver,btn2:this.onHiddenTip}),e.createElement("div",{className:"game_pic"},e.createElement("img",{className:"my_sevr_cover",src:this.props.data.cover,alt:"game"}),e.createElement("div",{className:"start_btn",onClick:this.props.handleStart.bind(this,this.props.data,this.state.nowlinkUrl)}),e.createElement("i",{className:"capacity light"+this.state.status.lag},this.state.status.online,"/",this.state.status.max)),e.createElement("span",{className:"name"},this.props.data.name),e.createElement("span",{className:"link"},this.props.data.network),e.createElement("span",{className:"set_and_close"},e.createElement(c,{data:this.props.data,index:this.props.index,setMyUrl:this.setMyUrl}),e.createElement(d,{onDel:this.onTipDel,onSet:this.onSetting,index:this.props.index})))}});window.SevrBox=e.createClass({displayName:"window.SevrBox",getInitialState:function(){return{show:"hot",showdetal:"hidden",showshadow:"hidden",newStatus:[],proTxt:"初始",text:"",obj:{}}},componentWillMount:function(){this.setState({data:staticData}),this.props.setStart(this.handleStart),mcAction.litenInstance(this.onChangeTxtOninstance,this.onChangeStatus,this.onHideenShadow)},onChangeTxtOninstance:function(e,t){this.setState({proTxt:t})},onChangeStatus:function(e){this.setState({text:!0})},onHideenShadow:function(e){},handleStart:function(e,t){instManager.startInstance(e.id,e,t),$.ajax({url:"https://dl.aipai.com/zuihuiwan/apps/mc.php?action=addServer&serverId="+e.id,dataType:"jsonp",jsonpCallback:"mc_addserver",cache:!0,success:function(e){this.refs.SevrGameBox.ajaxMyserver()}.bind(this),error:function(e,t,a){}.bind(this)})},handleClick:function(e,t){mcAction.liCur($(".sevr_nav li"),e),this.setState({show:t})},toDetal:function(e){this.setState({showdetal:"show"}),this.setState({obj:e}),this.props.linkSele(e)},onHiddenDetal:function(){this.setState({showdetal:"hidden"})},render:function(){return e.createElement("section",{className:"mc_server"},e.createElement(s,{show:this.state.showshadow,txt:this.state.proTxt}),e.createElement(n,{showdetal:this.state.showdetal,hiddenDetal:this.onHiddenDetal,obj:this.state.obj,handleStart:this.handleStart}),e.createElement(t,{data:this.state.data.sevrNav,click:this.handleClick}),e.createElement(r,{ref:"SevrGameBox",show:this.state.show,toDetal:this.toDetal,handleStart:this.handleStart,getAddress:this.props.getAddress,initSele:this.props.initSele}))}})}(window.React)},32:function(e,t){!function(e){var t=e.createClass({displayName:"SkinNav",render:function(){var t=this.props.click;return e.createElement("div",{className:"rest_nav hd_res"},e.createElement("ul",null,this.props.data.map(function(s,i){return e.createElement(a,{li:s,index:i,click:t})})))}}),a=e.createClass({displayName:"SkinNavli",render:function(){return e.createElement("li",{className:this.props.li.cur,onClick:this.props.click.bind(this,this.props.index,this.props.li["data-sort"])},this.props.li.title)}}),s=e.createClass({displayName:"SkinMod",st:0,getInitialState:function(){return{limitty:"5",limitth:"0",theme:{5:[],6:[]},allSkin:[],mySkin:{5:[],6:[]},showMoreCls:"show",isLoading:!1,userInfo:{curSkins:{cape:{id:-1},skin:{id:-1}},favoriteSkins:{5:[],6:[]}},myCanvas:!1,showSkin:{id:"",url:""},modPage:2,czPage:2,mapPage:2}},componentWillMount:function(){var e=this;e.loopAjax(1,null,null,function(){this.initPage()}.bind(this)),userProfile.loadUserExternInfoFinished.connect(function(){e.initCanvas(userProfile.userExternJson());var t=userProfile.userExternJson().favoriteSkins;t[5].forEach(function(e){e.fav=1}),t[6].forEach(function(e){e.fav=1}),e.setState({userInfo:userProfile.userExternJson(),mySkin:t})})},loopAjax:function(e,t,a,s){var i=t||this.state.limitty,n=0==a?a:a||this.state.limitth;$.ajax({url:"http://www.aipai.com/zuihuiwan/apps/mc_action-skins_type-"+i+"_theme-"+n+"_page-"+e+".html",dataType:"jsonp",jsonpCallback:"mc_skin",cache:!0,success:function(e){-1!=e.code&&(0==this.state.theme[5]&&this.setState({theme:e.data.theme}),this.setState({allSkin:e.data.skins[this.state.limitty],total:e.data.total}),s?s():0)}.bind(this),error:function(e,t,a){}.bind(this)})},delallSkin:function(e){var t=this.state.userInfo;6==e.type&&(t.curSkins.cape.id=e.id,t.curSkins.cape.pic=e.pic,t.curSkins.cape.picOri=e.picOri),5==e.type&&(t.curSkins.skin.id=e.id,t.curSkins.skin.pic=e.pic,t.curSkins.skin.picOri=e.picOri),this.setState({userInfo:t})},componentDidMount:function(){var e=this;resManager.installStatusChanged.connect(function(t,a,s,i){3===i&&(5===a?e.state.myCanvas.setPara({skinURL:"file:///"+e.state.userInfo.skinsPath+"/"+t+".png"}):6===a&&e.state.myCanvas.setPara({capeURL:"file:///"+e.state.userInfo.skinsPath+"/"+t+".png"}))})},initCanvas:function(e){if(this.state.myCanvas)return!1;var t,a=this;t=new MSP({skinURL:"file:///"+e.skinsPath+"/"+e.curSkins.skin.id+".png",capeURL:"file:///"+e.skinsPath+"/"+e.curSkins.cape.id+".png",distance:35,canvasWidth:324,canvasHeight:290,container:$("#skinpreview")}),a.setState({myCanvas:t})},handleClickTy:function(e,t){mcAction.liCur($(".ty_list .skin_con"),e-1),this.state.theme[e+4].length>6?this.setState({showMoreCls:"show"}):this.setState({showMoreCls:"hidden"}),this.setState({limitty:t}),$(".skin_more").hide(),$(".ver_list .skin_con").eq(0).click()},handleClickVr:function(e,t){mcAction.liCur($(".ver_list .skin_con"),e),this.setState({limitth:t},function(){this.loopAjax(1,null,t,function(){this.initPage()}.bind(this))}.bind(this)),$(".skin_more").hide(),$(".skin_con_more").removeClass("cur")},handleMoreTheme:function(e){"on"==e?(clearTimeout(this.st),$(".skin_more").show(),$(".skin_con_more").addClass("cur")):this.st=setTimeout(function(){$(".skin_more").hide(),$(".skin_con_more").removeClass("cur")},100)},handleFav:function(e,t,a){var s=this.state.allSkin,i=this.state.mySkin,n=_.findIndex(s,{id:e});index2=_.findIndex(i[a],{id:e}),0==t?(s[n].fav=0,-1!=index2&&i[a].splice(index2,1)):(s[n].fav=1,-1!=index2?i[a][index2].fav=1:i[a].push(s[n])),this.setState({allSkin:s,mySkin:i})},clickskin:function(e,t,a,s){resManager.installRes(e,a,s),$(".skins").removeClass("cur"),$(".skin"+e).addClass("cur"),this.setState({showSkin:s})},initPage:function(){var e=this,t=this.props,a=(t.videos,t.curSort,Math.ceil(e.state.total[e.state.limitty]/90));1===a?$(".skin_box  .pagetab").html(""):($(".skin_box  .pagetab").html(""),$(".skin_box  .pagetab").createPage({pageCount:a,current:1,backFn:function(t){$(".skin_box  .skinall").scrollTop("0"),e.loopAjax(t,e.state.limitty,e.state.limitth)}}))},render:function(){var t=this.handleClickVr,a=this.handleClickTy,s=this.clickskin,c=this.handleMoreTheme;return this.props.toDetal,e.createElement("div",{className:"bd_res"},e.createElement("div",{className:"res_tabcon "+this.props.show},e.createElement("div",{className:"rest_select select_con"},e.createElement("div",{className:"clearfix list ty_list"},e.createElement("ul",null,e.createElement("li",{className:"ti"},"类型："),this.props.data.skinlimittp.map(function(t,s){return e.createElement(i,{li:t,index:s,click:a})}))),e.createElement("div",{className:"clearfix list ver_list"},e.createElement("ul",null,e.createElement("li",{className:"ti"},"主题："),e.createElement("li",{className:"con skin_con cur",onClick:t.bind(null,0,0)},"全部"),this.state.theme[this.state.limitty].map(function(a,s){return s>4?!1:e.createElement(i,{li:a,index:s,click:t})}),e.createElement("li",{className:"con skin_con_more "+this.state.showMoreCls,onMouseOver:c.bind(this,"on"),onMouseOut:c.bind(this,"off")},"更多"),e.createElement("div",{className:"skin_more clearfix hidden",onMouseOver:c.bind(this,"on"),onMouseOut:c.bind(this,"off")},this.state.theme[this.state.limitty].map(function(a,s){return 4>=s?!1:e.createElement(i,{li:a,index:s,click:t})}))))),e.createElement("div",{className:"skin_box "},e.createElement(o,{click:this.clickskin,skin:this.state.showSkin,myCanvas:this.state.myCanvas,handleFav:this.handleFav,delallSkin:this.delallSkin,type:this.state.limitty}),e.createElement(n,{skin:this.state.allSkin,clickskin:s,type:this.state.limitty,info:this.state.userInfo}),e.createElement(r,{skin:this.state.mySkin[this.state.limitty],clickskin:s,type:this.state.limitty,info:this.state.userInfo}),e.createElement(l,null))))}}),i=e.createClass({displayName:"SkinLimitli",render:function(){return e.createElement("li",{className:this.props.li.id+" con skin_con "+this.props.li.cls,onClick:this.props.click.bind(this,this.props.index+1,this.props.li.id)},this.props.li.themeName)}}),n=e.createClass({displayName:"SkinAll",render:function(){var t=this.props.clickskin,a=this.props.info;return this.props.page,e.createElement("div",{className:"skinall"},this.props.skin.map(function(s,i){return e.createElement(c,{li:s,index:i,click:t,info:a})}),e.createElement("div",{className:"pagetab"}))}}),r=e.createClass({displayName:"SkinMy",render:function(){var t=this.props.clickskin,a=this.props.info;return e.createElement("div",{className:"skinmy"},this.props.skin.map(function(s,i){return e.createElement(c,{li:s,index:i,click:t,info:a})}))}}),l=e.createClass({displayName:"SkinUp",render:function(){return e.createElement("div",{className:"skinup"},e.createElement("label",{"for":"name"},"名  称"),e.createElement("input",{type:"text",name:"name",value:""}),e.createElement("br",null),e.createElement("label",{"for":"author"},"作  者"),e.createElement("input",{type:"text",name:"author",value:""}),e.createElement("br",null),e.createElement("label",{"for":"uper"},"上传者"),e.createElement("input",{type:"text",name:"uper",value:""}),e.createElement("br",null),e.createElement("div",{className:"pic_upload"},e.createElement("label",{"for":"file"},"图  片"),e.createElement("input",{className:"pic_up",type:"file",name:"file",value:""}),e.createElement("span",{className:"pic_up_txt"},"浏览"),e.createElement("label",{className:"pic_tip","for":"file"},"尺寸 : 64*32")),e.createElement("span",{className:"upload_btn"},"提交"))}}),c=e.createClass({displayName:"Skin",render:function(){var t="";return(this.props.li.id==this.props.info.curSkins.cape.id||this.props.li.id==this.props.info.curSkins.skin.id)&&(t="useSkinTxt"),e.createElement("div",{className:"skins s"+this.props.li.themeId+" skin"+this.props.li.id+" type"+this.props.li.type,onClick:this.props.click.bind(this,this.props.li.id,this.props.li.pic,this.props.li.type,this.props.li)},e.createElement("p",{className:t+" use"}),e.createElement("img",{src:this.props.li.pic}),e.createElement("p",{className:"name"},this.props.li.name),e.createElement("span",{className:"fav"+this.props.li.fav}))}}),o=e.createClass({displayName:"CanvasSkin",getInitialState:function(){return{actTxt:"跑步",favTxt:"取消收藏",favcls:"unfav_btn",fav:1}},componentWillReceiveProps:function(e){0==e.skin.fav?this.setState({favTxt:"收藏",favcls:"",fav:e.skin.fav}):1==e.skin.fav&&this.setState({favTxt:"取消收藏",favcls:"unfav_btn",fav:e.skin.fav})},useSkin:function(){if(0===$(".skins.cur").length)return!1;var e=this;$.ajax({url:"http://mcbox.aipai.com/api/skin.php?action=setSkin&bid="+userProfile.userProfileJson().bid+"&token="+userProfile.userExternJson().aptoken+"&skin="+e.props.skin.id+"&type="+e.props.skin.type,dataType:"jsonp",jsonpCallback:"mc_setskin",cache:!0,success:function(t){-1!=t.code&&e.props.delallSkin(e.props.skin)}.bind(this),error:function(e,t,a){}.bind(this)}),this.fav(!1)},fav:function(e){var t=this;1==this.state.fav&&e?$.ajax({url:"https://dl.aipai.com/zuihuiwan/apps/mc.php?action=delFav&id="+t.props.skin.id,dataType:"jsonp",jsonpCallback:"mc_delfav",cache:!0,success:function(e){-1!=e.code&&(t.setState({favTxt:"收藏",favcls:"",fav:0}),t.props.handleFav(t.props.skin.id,0,t.props.type))}.bind(this),error:function(e,t,a){}.bind(this)}):$.ajax({url:"https://dl.aipai.com/zuihuiwan/apps/mc.php?action=addFav&id="+t.props.skin.id,dataType:"jsonp",jsonpCallback:"mc_addfav",cache:!0,success:function(e){-1!=e.code&&(t.setState({favTxt:"取消收藏",favcls:"unfav_btn",fav:1}),t.props.handleFav(t.props.skin.id,1,t.props.type))}.bind(this),error:function(e,t,a){}.bind(this)})},act:function(){var e={isRunning:!1};if("跑步"===this.state.actTxt){this.setState({actTxt:"行走"});var e={isRunning:!0}}else{this.setState({actTxt:"跑步"});var e={isRunning:!1}}this.props.myCanvas.setPara(e)},render:function(){return e.createElement("div",{id:"skinpreview"},e.createElement("div",{className:"skin_btn"},e.createElement("span",{className:"fav_btn "+this.state.favcls,onClick:this.fav.bind(this,!0)},this.state.favTxt),e.createElement("span",{className:"act_btn",onClick:this.act},this.state.actTxt),e.createElement("span",{className:"use_btn",onClick:this.useSkin},"使用")))}});window.SkinBox=e.createClass({displayName:"window.SkinBox",srcMyObj:"",srcAllObj:"",getInitialState:function(){return{ret:[],myRet:[],data:staticData,showdetal:"hidden",show:"all",obj:{}}},handleClick:function(e,t){mcAction.liCur($(".mc_skin .rest_nav li"),e),this.setState({show:t})},render:function(){return e.createElement("section",{className:"mc_skin"},e.createElement(t,{data:this.state.data.skinNav,click:this.handleClick}),e.createElement(s,{data:this.state.data,show:this.state.show}))}})}(window.React)},33:function(e,t){!function(e){var t=e.createClass({displayName:"Tab",render:function(){var t=this.props,s=t.click,i=t.del;return e.createElement("ul",{className:"tab_nav"},this.props.data.map(function(t,n){return e.createElement(a,{li:t,index:n,click:s,del:i})}))}}),a=e.createClass({displayName:"Li",render:function(){return e.createElement("div",{className:"tab_li_box"},e.createElement("li",{className:this.props.li.cur,onClick:this.props.click.bind(this,this.props.index,this.props.li.sort)},this.props.li.title,e.createElement("b",{onClick:function(){return this.props.del()}.bind(this)},"X")),e.createElement("p",null))}}),s=e.createClass({displayName:"Search",cleanInput:function(){$(".input_box input").val(""),$(".clean").addClass("hidden")},keyup:function(e){$(".clean").removeClass("hidden"),13==e.keyCode&&this.props.click($(".input_box input").val()),$(".input_box input").val()||$(".clean").addClass("hidden")},render:function(){var t=this.props,a=t.click,s=t.keywords;return e.createElement("div",{className:"input_box"},e.createElement("input",{placeholder:"输入关键字",maxLength:"27",onKeyUp:this.keyup}),e.createElement("span",{className:"clean hidden",onClick:this.cleanInput}),e.createElement("i",{onClick:function(){return a($(".input_box input").val())}},"|"),e.createElement("p",{className:"keywords_box"},s.map(function(t,s){return s>=6?!1:e.createElement("span",{onClick:function(){return a(t)}},t)})))}}),i=e.createClass({displayName:"Suggestion",componentDidMount:function(){var e=0;setInterval(function(){var t=$(".suggestion_box .loop a"),a=t.length;t.removeClass("cur").eq(e).addClass("cur"),e++,e==a&&(e=0)},3e3)},render:function(){var t=this.props,a=t.data,s=t.click;return e.createElement("div",{className:"suggestion_box"},e.createElement("div",{className:"loop"},a.focus.map(function(t,a){return e.createElement("a",{href:t.url},e.createElement("img",{src:t.img}))})),e.createElement("div",{className:"show"},e.createElement("div",{className:"daren"},e.createElement("p",{className:"title"},"今日达人"),a.daren.map(function(t,a){return e.createElement("span",{onClick:function(){return s(t.title)}},e.createElement("img",{src:t.img}),e.createElement("p",{className:"name"},t.title))})),e.createElement("div",{className:"xinren"},e.createElement("p",{className:"title"},"今日新人"),a.xinxiu.map(function(t,a){return e.createElement("span",{onClick:function(){return s(t.title)}},e.createElement("img",{src:t.img}),e.createElement("p",{className:"name"},t.title))}))),e.createElement("a",{href:"http://mc.aipai.com",className:"more_btn"},"更多MC牛人",e.createElement("i",null)))}}),n=e.createClass({displayName:"Hot",initPage:function(e){var t=this,a=e,s=a.videos,i=a.curSort;!s.total||s.total<8?$(".hot_box .pagetab").hide():($(".hot_box .pagetab").show(),$(".hot_box .pagetab").createPage({pageCount:Math.ceil(s.total/8)>=100?100:Math.ceil(s.total/8),current:1,backFn:function(e){t.props.click(i,e,-1)}}))},componentWillReceiveProps:function(e){e.curSort!==this.props.curSort&&this.initPage(e)},render:function(){var t=this.props,a=t.ohterVideo,s=t.click,i=t.videos;return e.createElement("div",{className:"hot_box"},e.createElement("nav",null,e.createElement("span",{className:"cur",onClick:function(){return s("",1,0)}},e.createElement("p",null,"顶上来的作品")),e.createElement("span",{onClick:function(){return s("class",1,1)}},e.createElement("p",null,"精华作品")),e.createElement("span",{onClick:function(){return s("id",1,2)}},e.createElement("p",null,"最新作品")),e.createElement("span",{onClick:function(){return s("flower",1,3)}},e.createElement("p",null,"本周鲜花榜")),e.createElement("span",{onClick:function(){return s("click",1,4)}},e.createElement("p",null,"本周人气榜")),a.map(function(t,a){return a>=3?!1:e.createElement("span",{onClick:function(){return s("other",1,a+5,a)}},e.createElement("p",null,t.title))})),e.createElement("div",{className:"video_box"},e.createElement("div",{className:"loading "+this.props.load},e.createElement("div",{className:"loader"},e.createElement("div",null),e.createElement("div",null),e.createElement("div",null))),i.data[0].map(function(t,a){return t.work||(t.work=t),e.createElement("a",{className:"videos",href:t.work.url,key:t.id},e.createElement("img",{src:t.work.middle,alt:t.work.title}),e.createElement("span",null,t.work.totalTime),e.createElement("p",null,t.work.title))}),i.data[1].map(function(t,a){return t.work||(t.work=t),e.createElement("a",{className:"videos",href:t.work.url,key:t.id},e.createElement("img",{src:t.work.middle,alt:t.work.title}),e.createElement("span",null,t.work.totalTime),e.createElement("p",null,t.work.title))}),e.createElement("div",{className:"pagetab"})))}}),r=e.createClass({displayName:"SearchVideos",getInitialState:function(){return{tipId:0}},initPage:function(e){var t=e,a=t.changePage,s=t.videos,i=t.curKey;s.total<8?$(".key_box .pagetab").hide():$(".key_box .pagetab").show().createPage({pageCount:Math.ceil(s.total/10)>=100?100:Math.ceil(s.total/10),current:1,backFn:function(e){a(i,e)}})},closeTip:function(){$(".key_box .info_box").hide()},componentWillReceiveProps:function(e){if(e.curKey!==this.props.curKey&&this.initPage(e),0==e.videos.data.length)$(".key_box .video_box").hide(),$(".key_box .video_null").show();else{if(e.info===!0){var t=this.state.tipId;clearTimeout(t),$(".key_box .info_box").show(),t=setTimeout(function(){$(".key_box .info_box").hide()},3500),this.setState({tipId:t})}$(".key_box .video_box").show(),$(".key_box .video_null").hide()}},render:function(){var t=this.props,a=t.click,s=t.videos,i=t.keywords,n=t.curKey;return e.createElement("div",{className:"key_box"},e.createElement("div",{className:"loading "+this.props.load},e.createElement("div",{className:"loader"},e.createElement("div",null),e.createElement("div",null),e.createElement("div",null))),e.createElement("div",{className:"info_box",onClick:this.closeTip},e.createElement("p",{className:"info"},"(约有",e.createElement("span",{className:"org"},s.total),"个符合",e.createElement("span",{className:"org"},n),"的作品)")),e.createElement("div",{className:"video_box"},e.createElement("div",null,s.data.map(function(t,a){return e.createElement("a",{className:"videos",key:t.id,href:t.url},e.createElement("img",{src:t.big.replace(/400.jpg/,"big.jpg"),alt:t.title}),e.createElement("span",null,t.totalTime),e.createElement("p",null,t.title))})),e.createElement("div",{className:"pagetab"})),e.createElement("div",{className:"video_null"},e.createElement("p",null,"暂无视频 , 看看热门关键词吧"),e.createElement("div",null,i.map(function(t,s){return s>3?!1:e.createElement("span",{onClick:function(){return a(t,1)}},t)}))))}});window.VideoBox=e.createClass({displayName:"window.VideoBox",getInitialState:function(){return{show:"suggestion",nav:{videoNav:[]},ohterVideo:[],curSort:"init",indexData:{daren:[],xinxiu:[],focus:[]},info:!0,curKey:"fuck",searchVideos:{data:[]},videos:{data:[[],[]]},load:"show",random:[],hotKey:[],keywords:[]}},componentWillMount:function(){this.setState({nav:staticData}),$.ajax({url:"http://www.aipai.com/zuihuiwan/apps/mcvideo_action-index.html",dataType:"jsonp",jsonpCallback:"mcvideo_index",cache:!0,success:function(e){this.setState({indexData:e.data,random:e.data.keywords.sort(function(){return.5-Math.random()}),keywords:e.data.keywords.concat([])},function(){return this.handleKey()}.bind(this))}.bind(this),error:function(e,t,a){console.error(this.props.url,t,a.toString())}.bind(this)}),$.ajax({url:"http://www.aipai.com/zuihuiwan/apps/mcvideo_action-video.html",dataType:"jsonp",jsonpCallback:"mcvideo_video",cache:!0,success:function(e){this.setState({ohterVideo:e.videoTypes})}.bind(this),error:function(e,t,a){console.error(this.props.url,t,a.toString())}.bind(this)}),this.getVideo("",1)},getVideo:function(e,t){this.setState({load:"show"});var a=JSON.stringify({gameid:34513,page:t,pageSize:8,totalPage:1,sort:e});$.ajax({url:"http://www.aipai.com/app/www/apps/gameAreaInfo.php?action=getWork&from=mcbox&data="+a,dataType:"jsonp",jsonpCallback:"mcvideo_areainfo",cache:!0,success:function(t){this.setState({videos:t,curSort:e}),setTimeout(function(){this.setState({load:"hidden"})}.bind(this),500)}.bind(this),error:function(e,t,a){console.error(this.props.url,t,a.toString())}.bind(this)})},getSearch:function(e,t,a){this.setState({load:"show"}),$.ajax({url:"http://so.aipai.com/api/search_gameid-34513_key-"+e+"_page-"+t+"_rows-10.html",dataType:"jsonp",jsonpCallback:"mcvideo_search",cache:!0,success:function(t){this.setState({searchVideos:t,curKey:e,info:!1}),setTimeout(function(){this.setState({load:"hidden"})}.bind(this),500),a?a():1,mcAction.liCur($(".video_tab_box .tab_nav li"),2)}.bind(this),error:function(e,t,a){console.error(this.props.url,t,a.toString())}.bind(this)})},handleClick:function(e,t){mcAction.liCur($(".video_tab_box .tab_nav li"),e),this.setState({show:t})},del:function(){var e=this.state.nav;return e.videoNav.pop(),mcAction.liCur($(".video_tab_box .tab_nav li"),0),this.setState({nav:e,show:"suggestion",curKey:""}),!1},handleKey:function(e){var t=window.localStorage.searchKey,a=[],s=this.state.random,i=[];t?a=t.split(","):(window.localStorage.searchKey="MC,",a=["MC"]),s.forEach(function(t,a){t==e&&s.splice(a,1)}),e?(a.length>=3?a.pop():0,a.unshift(e),t=a.join(","),window.localStorage.searchKey=t):(i=_.uniq(a.concat(s)).slice(0,6),this.setState({hotKey:i}))},handlerSearch:function(e,t){if(!e)return $(".mc_video .input_box input").addClass("red"),!1;$(".mc_video .input_box input").removeClass("red");var a=t||1,s=this.state.nav;return this.state.curKey==e?!1:(e=e.substring(0,27),this.handleKey(e),s.videoNav[2]?(s.videoNav[2].title=e,s.videoNav[2].sort="key",s.videoNav[2].cur=""):s.videoNav.push({title:e,sort:"key",cur:"cur"}),$(".clean").removeClass("hidden"),$(".input_box input").val(e),void this.getSearch(e,a,function(){this.setState({show:"key",nav:s,info:!0})}.bind(this)))},switchTab:function(e,t,a,s){-1!==a&&mcAction.liCur($(".hot_box nav span"),a),"other"==e?this.setState({videos:this.state.ohterVideo[s],curSort:s}):this.getVideo(e,t)},render:function(){return e.createElement("section",{className:"mc_video"},e.createElement(s,{keywords:this.state.hotKey,click:this.handlerSearch}),e.createElement("div",{className:"video_tab_box "+this.state.show},e.createElement(t,{data:this.state.nav.videoNav,click:this.handleClick,del:this.del}),e.createElement(i,{data:this.state.indexData,click:this.handlerSearch}),e.createElement(n,{load:this.state.load,click:this.switchTab,curSort:this.state.curSort,ohterVideo:this.state.ohterVideo,videos:this.state.videos}),e.createElement(r,{load:this.state.load,videos:this.state.searchVideos,keywords:this.state.keywords,click:this.handlerSearch,changePage:this.getSearch,curKey:this.state.curKey,info:this.state.info})))}})}(window.React)}});
